#include <Servo.h>


Servo myservob1;
Servo myservob2;
Servo myservob3;
Servo myservob4;
Servo servo;
Servo myservoe1;
Servo myservoe2;
Servo myservoe3;
Servo myservoe4;
int potpin = A0;
int val;
int tmp = 15;
int tmp_1 = 1500;
int tmp_intervalo = 1000;
int ang_lim_max = 170;
int ang_lim_min = 10;
int ang_sub = 100;
int ang_des = 80;
int ang_padrao = 90;
int indice = 0;

void setup() {
  Serial.begin(9600);
  myservob1.attach(2);
  myservob2.attach(3);
  myservob3.attach(4);
  myservob4.attach(5);
  myservoe1.attach(6);
  myservoe2.attach(7);
  myservoe3.attach(8);
  myservoe4.attach(9);
}

void loop() {
  if (indice == 0) {
    myservob1.write(90);
    delay(tmp);
    myservob2.write(90);
    delay(tmp);
    myservob3.write(90);
    delay(tmp);
    myservob4.write(90);
    delay(tmp);
    myservoe1.write(90);
    delay(tmp);
    myservoe2.write(90);
    delay(tmp);
    myservoe3.write(90);
    delay(tmp);
    myservoe4.write(90);
    delay(tmp_1);
    Serial.print("Motor 1");
    Serial.println();
    passo_1();
  }
  else if (indice == 1) {
    Serial.print("Passo 2");
    Serial.println();
    passo_2();
  }
  else if (indice == 2) {
    Serial.print("Passo 3");
    Serial.println();
    passo_3();
  }
  else if (indice == 3) {
    Serial.print("Passo 4");
    Serial.println();
    passo_4();
  }
  else if (indice == 4) {
    Serial.print("Passo 5");
    Serial.println();
    passo_5();
  }
  else if (indice == 5) {
    Serial.print("Passo 6");
    Serial.println();
    passo_6();
  }
  else if (indice == 6) {
    Serial.print("Passo 7");
    Serial.println();
    passo_7();
  }
  else if (indice == 7) {
    Serial.print("Passo 8");
    Serial.println();
    passo_8();
  }
  else if (indice == 8) {
    Serial.print("Passo 9");
    Serial.println();
    passo_9();
  }
  else if (indice == 9) {
    Serial.print("Estabilizando...");
    Serial.println();
    estabilizacao();
  }
}

void passo_1() {
  Serial.print("Subida");
  Serial.println();
  delay(tmp);
  myservoe1.write(ang_sub);
  delay(tmp);
  Serial.print("Subida OK");
  Serial.println();
  delay(tmp_intervalo);
  Serial.print("Giro Mínimo");
  Serial.println();
  delay(tmp);
  myservob1.write(ang_lim_min);
  delay(tmp);
  Serial.print("Giro Mínimo OK");
  Serial.println();
  delay(tmp_intervalo);
  Serial.print("Descida");
  Serial.println();
  delay(tmp);
  myservoe1.write(ang_des);
  delay(tmp);
  Serial.print("Descida OK");
  Serial.println();
  delay(tmp_intervalo);
  indice = 1; // Próximo Passo
}

void passo_2() {
  Serial.print("Subida");
  Serial.println();
  delay(tmp);
  myservoe3.write(ang_sub);
  delay(tmp);
  Serial.print("Subida OK");
  Serial.println();
  delay(tmp_intervalo);
  Serial.print("Giro Máximo");
  Serial.println();
  delay(tmp);
  myservob3.write(ang_lim_max);
  delay(tmp);
  Serial.print("Giro Máximo OK");
  Serial.println();
  delay(tmp_intervalo);
  Serial.print("Descida");
  Serial.println();
  delay(tmp);
  myservoe3.write(ang_des);
  delay(tmp);
  Serial.print("Descida OK");
  Serial.println();
  delay(tmp_intervalo);
  indice = 2;
}

void passo_3() {
  Serial.print("Subida");
  Serial.println();
  delay(tmp);
  myservoe2.write(ang_sub);
  delay(tmp);
  Serial.print("Subida OK");
  Serial.println();
  delay(tmp_intervalo);
  Serial.print("Subida");
  Serial.println();
  delay(tmp);
  myservoe4.write(ang_sub);
  delay(tmp);
  Serial.print("Subida OK");
  Serial.println();
  delay(tmp_intervalo);
  indice = 3;
}

void passo_4() {
  Serial.print("Giro Padrão");
  Serial.println();
  delay(tmp);
  myservob1.write(ang_padrao);
  delay(tmp);
  Serial.print("Giro Padrão OK");
  Serial.println();
  delay(tmp_intervalo);
  Serial.print("Giro Padrão");
  Serial.println();
  delay(tmp);
  myservob3.write(ang_padrao);
  delay(tmp);
  Serial.print("Giro Padrão OK");
  Serial.println();
  delay(tmp_intervalo);
  indice = 4;
}

void passo_5() {
  Serial.print("Giro Mínimo");
  Serial.println();
  delay(tmp);
  myservob2.write(ang_lim_max);
  delay(tmp);
  Serial.print("Giro Mínimo OK");
  Serial.println();
  delay(tmp_intervalo);
  Serial.print("Subida");
  Serial.println();
  delay(tmp);
  myservoe2.write(ang_des);
  delay(tmp);
  Serial.print("Subida OK");
  Serial.println();
  delay(tmp_intervalo);
  indice = 5;
}

void passo_6() {
  Serial.print("Giro Mínimo");
  Serial.println();
  delay(tmp);
  myservob4.write(ang_lim_min);
  delay(tmp);
  Serial.print("Giro Mínimo OK");
  Serial.println();
  delay(tmp_intervalo);
  Serial.print("Descida");
  Serial.println();
  delay(tmp);
  myservoe4.write(ang_des);
  delay(tmp);
  Serial.print("Descida OK");
  Serial.println();
  delay(tmp_intervalo);
  indice = 6;
}

void passo_7() {
  Serial.print("Subida");
  Serial.println();
  delay(tmp);
  myservoe1.write(ang_sub);
  delay(tmp);
  Serial.print("Subida OK");
  Serial.println();
  delay(tmp_intervalo);
  Serial.print("Subida");
  Serial.println();
  delay(tmp);
  myservoe3.write(ang_sub);
  delay(tmp);
  Serial.print("Subida OK");
  Serial.println();
  delay(tmp_intervalo);
  indice = 7;
}

void passo_8() {
  Serial.print("Giro Padrão");
  Serial.println();
  delay(tmp);
  myservob2.write(ang_padrao);
  delay(tmp);
  Serial.print("Giro Padrão OK");
  Serial.println();
  delay(tmp_intervalo);
  Serial.print("Giro Padrão");
  Serial.println();
  delay(tmp);
  myservob4.write(ang_padrao);
  delay(tmp);
  Serial.print("Giro Padrão OK");
  Serial.println();
  delay(tmp_intervalo);
  indice = 8;
}

void passo_9() {
  Serial.print("Descida");
  Serial.println();
  delay(tmp);
  myservoe1.write(ang_des);
  delay(tmp);
  Serial.print("Descida OK");
  Serial.println();
  delay(tmp_intervalo);
  Serial.print("Descida");
  Serial.println();
  delay(tmp);
  myservoe3.write(ang_des);
  delay(tmp);
  Serial.print("Descida OK");
  Serial.println();
  delay(tmp_intervalo);
  indice = 9;
}

void estabilizacao() {
  Serial.print("Estabilização");
  Serial.println();
  delay(tmp);
  myservob1.write(ang_padrao);
  myservob2.write(ang_padrao);
  myservob3.write(ang_padrao);
  myservob4.write(ang_padrao);
  delay(tmp);
  Serial.print("Estado: Nominal");
  Serial.println();
  delay(tmp_intervalo);
  indice = 0;
}
